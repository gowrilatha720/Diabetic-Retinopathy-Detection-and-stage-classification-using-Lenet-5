<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>Diabetic Retinopathy</title>

    <link rel="canonical" href="https://getbootstrap.com/docs/4.0/examples/starter-template/">

    <!-- Bootstrap core CSS -->
    <link href="https://cdn.bootcss.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.bootcss.com/popper.js/1.12.9/umd/popper.min.js"></script>
    <script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdn.bootcss.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>
    <script src="https://code.highcharts.com/modules/export-data.js"></script>
    <script src="https://code.highcharts.com/modules/accessibility.js"></script>
    <script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>

    <!-- Custom styles for this template -->
    <link href="{{ url_for('static', filename='css/styles.css') }}" rel="stylesheet">   
  </head>

  <body class="bg-image" 
     style="background-image: url('plm.automation.siemens.com/media/global/fr/visual%20technology_tcm55-59036.jpg');
            height: 100vh">
    <nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top">
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarsExampleDefault">
        <ul class="navbar-nav mr-auto">
          <li class="nav-item active">
          <a class="nav-link" href="#" class="bi bi-house"><h3><i class="bi bi-house"></i>Home</h3> <span class="sr-only">(current)</span></a>
          </li>
        </ul>
          <a href="{{ url_for('about') }}" class="btn btn-outline-success my-2 my-sm-0">About us</a>
      </div>
    </nav>

   

      <div class="starter-template">
        <p><h1 style="font-family:verdana"; class="text-primary">Diabetic Retinopathy</h1></p>
      
    <form id="upload-file" method="post" enctype="multipart/form-data">
        <label for="imageUpload" class="upload-label">
            Choose Retinal Image
        </label>
        <input type="file" name="file" id="imageUpload" accept=".png, .jpg, .jpeg">
    </form>

    <div class="image-section" style="display:none;">
        <div class="img-preview">
            <div id="imagePreview">
            </div>
        </div>
        <div class="wrapper">
        <button type="button" class="predict" id="btn-predict">Predict!</button>
        
    <div class="loader" style="display:none;"></div>
    <h3 id="result"></h3>
    </div>
</div>

</div>
<br><br>
 <main role="main" class="container">
      <figure class="highcharts-figure">
        <div id="chart-container">
        <h4><p style="text-align: center;" class="highcharts-description">
        A probability distribution is a mathematical function that describes the probability of different possible values of a variable. Probability distributions are often depicted using graphs or probability tables.
      </p></h4></div>
    </figure>
</main>
<p style="visibility: hidden" class="values">percentage</p>

    <script type="text/javascript">


 document.querySelector(".predict").addEventListener("click",function()
 {
    setTimeout(show, 3000);
    function show()
    {
        var  values = document.querySelector(".values").innerHTML
        fi = values.split(",")
        var c1 = parseFloat(fi[0])
        var c2 = parseFloat(fi[1])
        var c3 = parseFloat(fi[2])
        var c4 = parseFloat(fi[3])
        var c5 = parseFloat(fi[4])
        console.log(typeof c1,c2,c3,c4,c5);

    Highcharts.chart('chart-container', {
    chart: {
        type: 'column'
    },
    title: {
        align: 'left',
        text: 'Probability Distributions'
    },
    accessibility: {
        announceNewData: {
            enabled: true
        }
    },
    xAxis: {
        type: 'category'
    },
    yAxis: {
        title: {
            text: 'Accuracy'
        }
    },
    legend: {
        enabled: false
    },
    plotOptions: {
        series: {
            borderWidth: 0,
            dataLabels: {
                enabled: true,
                format: '{point.y:.1f}%'
            }
        }
    },

    tooltip: {
        headerFormat: '<span style="font-size:11px">{series.name}</span><br>',
        pointFormat: '<span style="color:{point.color}">{point.name}</span>: <b>{point.y:.2f}%</b> of total<br/>'
    },

    series: [
        {
            name: 'Class Name',
            colorByPoint: true,
            data: [
                {
                    name: 'Mild',
                    y: c1,
                },
                {
                    name: 'Moderate',
                    y: c2,
                    
                },
                {
                    name: 'No_DR',
                    y: c3,
                    
                },
                {
                    name: 'Proliferate_DR',
                    y: c4,
                    
                },
                {
                    name: 'Severe',
                    y: c5,
                },
                
            ]
        }
    ],
});
}
});


  </script>
    <script src="{{ url_for('static', filename='js/main.js') }}" type="text/javascript"></script>  
 </body>
</html>
